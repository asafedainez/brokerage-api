on: [push, pull_request]

jobs:
  eslint:
    runs-on: ubuntu-latest
    steps:
          uses: actions/checkout@v2

        - name: Subir ambiente docker
          run: docker-compose up -d

        - name: Instalando yarn
          run: npm install --global yarn

        - name: Instalando as dependÃªncias
          run: yarn i

        - name: Acessando container node
          run: docker exec -it brokerage sh

        - name: Executando o lint para verificar se a erros
          run: yarn lint
  
  tests:
    runs-on: ubuntu-latest
    needs: [eslint]
    steps:
        - name: Executando testes
          run: yarn test